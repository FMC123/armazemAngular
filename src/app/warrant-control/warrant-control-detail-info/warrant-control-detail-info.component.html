<section class="content-header" xmlns="http://www.w3.org/1999/html">
  <h1>
    Controle de Warrants
  </h1>
  <app-breadcrumb [items]="[
    ['Início', ''],
    ['Controle de Warrants', '/warrant-control'],
    ['Cliente', '/warrant-control/' + id],
    ['Detalhes', null]
  ]"></app-breadcrumb>
</section>

<section class="content">
  <div class="box">
      <div class="box-header">
        <div class="box-title" style="width: 100%">
          <h4>
            Detalhes Warrant
          </h4>
        </div>
      </div>

    <div class="box-body">
      <div class="table-responsive">
        <table class="table">
          <tr>
            <th class="col-xs-4 text-right">Cliente</th>
            <td class="col-xs-8">{{retention.client? retention.client.label:""}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Número do Warrant</th>
            <td class="col-xs-8">{{retention.warrantData?.code}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Data de Emissão</th>
            <td class="col-xs-8">{{retention.warrantData?.emissionDateString}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Validade</th>
            <td class="col-xs-8">{{retention.warrantData?.expiresCorrectDateToString}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Armazenamento</th>
            <td class="col-xs-8">{{retention.warrantData?.packType.description}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Serviço de Armazenamento</th>
            <td class="col-xs-8">{{retention.warrantData?.storageService.label}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Serviço de Seguro</th>
            <td class="col-xs-8">{{retention.warrantData?.insuranceService.label}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Serviço de Expedição</th>
            <td class="col-xs-8">{{retention.warrantData?.expeditionService.label}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Texto de Endosso</th>
            <td class="col-xs-8">{{retention.warrantData?.endorsementText}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Quantidade no Warrant</th>
            <td class="col-xs-8">{{retention.quantityString}} kg</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Sacas no Warrant</th>
            <td class="col-xs-8">{{retention.sacksQuantity}}</td>
          </tr>
          <tr>
            <th class="col-xs-4 text-right">Status</th>
            <td class="col-xs-8">{{retention.statusString}}</td>
          </tr>
        </table>
      </div>

    </div>
    <div class="box-header" *ngIf="retentionBatches && retentionBatches.length > 0">
      <div class="box-title" style="width: 100%">
        <h4 >
          Lotes bloqueados
        </h4>
      </div>
    </div>

    <div class="box-body">
      <div class="row"  *ngIf="retentionBatches && retentionBatches.length > 0">
        <div class="col-xs-12">
          <table class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
              <th>Lote</th>
              <th>Quantidade Total</th>
              <th>Quantidade no Warrant</th>
              <th>Sacas Bloqueadas</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of retentionBatches">
              <td>{{item.batch?.batchCode}}</td>
              <td>{{item.batch?.balanceString}} kg</td>
              <td>{{item.quantityString}} kg</td>
              <td>{{item.sacksQuantity}}</td>
            </tr>
            </tbody>
          </table>
          </div>
      </div>
    <a [class.disabled]="loading" class="btn btn-default btn-size fa-pull-left" (click)="handleGoBack()">
      VOLTAR
    </a>

    </div>
  </div>
</section>
